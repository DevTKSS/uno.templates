trigger:
  branches:
    include:
      - main
      - release/*
      - legacy/*

pr: 
  branches:
    include:
      - main
      - release/*
      - legacy/*
  paths:
    exclude:
      - .github/**
      - tools/**

variables:
  DOTNET_SKIP_FIRST_TIME_EXPERIENCE: true
  IsCanaryBranch: $[startsWith(variables['Build.SourceBranch'], 'refs/heads/canaries/')]
  ValidationUnoCheckVersionNet8: '1.26.4'
  ValidationUnoCheckVersionNet9: '1.31.0-dev.10'
  ValidationDotNetVersion: '8.0.407'

  # https://github.com/unoplatform/Uno.Wasm.Bootstrap/pull/887 remove when upgarding to .NET 9
  # compatible version of the bootstrapper
  UnoDisableNet9Validation: true

  # Required for WinUI 1.6
  WindowsSdkPackageVersion: '10.0.19041.57'

  # Required for WinAppSDK native AOT, to remove when included in uno.sdk
  AllowUnsafeBlocks: true

  # Reduce the number of downloaded packages
  RestoreEnablePackagePruning: true

stages:
- stage: Build
  jobs:
  - job: Packages

    pool:
      vmImage: 'windows-2022'

    steps:
    - checkout: self
      clean: 'true'
      fetchDepth: 0
